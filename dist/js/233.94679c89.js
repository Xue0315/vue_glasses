(self["webpackChunkvue_glasses"]=self["webpackChunkvue_glasses"]||[]).push([[233],{1957:function(t,e,s){
/*!
  * Bootstrap carousel.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,i){t.exports=i(s(1884),s(4130),s(6221),s(7317),s(1437),s(4378))})(0,(function(t,e,s,i,a,n){"use strict";const r="carousel",o="bs.carousel",l=`.${o}`,c=".data-api",d="ArrowLeft",u="ArrowRight",h=500,_="next",p="prev",m="left",v="right",g=`slide${l}`,f=`slid${l}`,b=`keydown${l}`,y=`mouseenter${l}`,I=`mouseleave${l}`,w=`dragstart${l}`,k=`load${l}${c}`,x=`click${l}${c}`,P="carousel",C="active",E="slide",$="carousel-item-end",T="carousel-item-start",L="carousel-item-next",A="carousel-item-prev",S=".active",D=".carousel-item",O=S+D,X=".carousel-item img",q=".carousel-indicators",z="[data-bs-slide], [data-bs-slide-to]",M='[data-bs-ride="carousel"]',N={[d]:v,[u]:m},W={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},F={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class U extends t{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=i.findOne(q,this._element),this._addEventListeners(),this._config.ride===P&&this.cycle()}static get Default(){return W}static get DefaultType(){return F}static get NAME(){return r}next(){this._slide(_)}nextWhenVisible(){!document.hidden&&a.isVisible(this._element)&&this.next()}prev(){this._slide(p)}pause(){this._isSliding&&a.triggerTransitionEnd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?e.one(this._element,f,(()=>this.cycle())):this.cycle())}to(t){const s=this._getItems();if(t>s.length-1||t<0)return;if(this._isSliding)return void e.one(this._element,f,(()=>this.to(t)));const i=this._getItemIndex(this._getActive());if(i===t)return;const a=t>i?_:p;this._slide(a,s[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&e.on(this._element,b,(t=>this._keydown(t))),"hover"===this._config.pause&&(e.on(this._element,y,(()=>this.pause())),e.on(this._element,I,(()=>this._maybeEnableCycle()))),this._config.touch&&n.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const a of i.find(X,this._element))e.on(a,w,(t=>t.preventDefault()));const t=()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),h+this._config.interval))},s={leftCallback:()=>this._slide(this._directionToOrder(m)),rightCallback:()=>this._slide(this._directionToOrder(v)),endCallback:t};this._swipeHelper=new n(this._element,s)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=N[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=i.findOne(S,this._indicatorsElement);e.classList.remove(C),e.removeAttribute("aria-current");const s=i.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(C),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,s=null){if(this._isSliding)return;const i=this._getActive(),n=t===_,r=s||a.getNextActiveElement(this._getItems(),i,n,this._config.wrap);if(r===i)return;const o=this._getItemIndex(r),l=s=>e.trigger(this._element,s,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o}),c=l(g);if(c.defaultPrevented)return;if(!i||!r)return;const d=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const u=n?T:$,h=n?L:A;r.classList.add(h),a.reflow(r),i.classList.add(u),r.classList.add(u);const p=()=>{r.classList.remove(u,h),r.classList.add(C),i.classList.remove(C,h,u),this._isSliding=!1,l(f)};this._queueCallback(p,i,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(E)}_getActive(){return i.findOne(O,this._element)}_getItems(){return i.find(D,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return a.isRTL()?t===m?p:_:t===m?_:p}_orderToDirection(t){return a.isRTL()?t===p?m:v:t===p?v:m}static jQueryInterface(t){return this.each((function(){const e=U.getOrCreateInstance(this,t);if("number"!==typeof t){if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}return e.on(document,x,z,(function(t){const e=i.getElementFromSelector(this);if(!e||!e.classList.contains(P))return;t.preventDefault();const a=U.getOrCreateInstance(e),n=this.getAttribute("data-bs-slide-to");return n?(a.to(n),void a._maybeEnableCycle()):"next"===s.getDataAttribute(this,"slide")?(a.next(),void a._maybeEnableCycle()):(a.prev(),void a._maybeEnableCycle())})),e.on(window,k,(()=>{const t=i.find(M);for(const e of t)U.getOrCreateInstance(e)})),a.defineJQueryPlugin(U),U}))},4378:function(t,e,s){
/*!
  * Bootstrap swipe.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,i){t.exports=i(s(4130),s(2166),s(1437))})(0,(function(t,e,s){"use strict";const i="swipe",a=".bs.swipe",n=`touchstart${a}`,r=`touchmove${a}`,o=`touchend${a}`,l=`pointerdown${a}`,c=`pointerup${a}`,d="touch",u="pen",h="pointer-event",_=40,p={endCallback:null,leftCallback:null,rightCallback:null},m={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class v extends e{constructor(t,e){super(),this._element=t,t&&v.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return p}static get DefaultType(){return m}static get NAME(){return i}dispose(){t.off(this._element,a)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),s.execute(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=_)return;const e=t/this._deltaX;this._deltaX=0,e&&s.execute(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(t.on(this._element,l,(t=>this._start(t))),t.on(this._element,c,(t=>this._end(t))),this._element.classList.add(h)):(t.on(this._element,n,(t=>this._start(t))),t.on(this._element,r,(t=>this._move(t))),t.on(this._element,o,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===u||t.pointerType===d)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}return v}))},9731:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return Y}});var i=s(3396),a=s(7139),n=s(9242);const r=t=>((0,i.dD)("data-v-0916dd6a"),t=t(),(0,i.Cn)(),t),o={class:"bg-light"},l={class:"container py-5"},c={class:"row position-relative"},d={"aria-label":"breadcrumb "},u={class:"breadcrumb d-none d-md-flex"},h={class:"breadcrumb-item active","aria-current":"page"},_={class:"col-xl-6 product-image"},p={id:"carouselIndicators",class:"carousel slide","data-bs-ride":"carousel",ref:"Carousel"},m={class:"carousel-indicators"},v=r((()=>(0,i._)("button",{type:"button","data-bs-target":"#carouselIndicators","data-bs-slide-to":"0",class:"active"},null,-1))),g=["data-bs-slide-to"],f={class:"carousel-inner"},b={class:"carousel-item active"},y=(0,i.uE)('<button class="carousel-control-prev" type="button" data-bs-target="#carouselIndicators" data-bs-slide="prev" data-v-0916dd6a><span class="carousel-control-prev-icon" aria-hidden="true" data-v-0916dd6a></span><span class="visually-hidden" data-v-0916dd6a>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselIndicators" data-bs-slide="next" data-v-0916dd6a><span class="carousel-control-next-icon" aria-hidden="true" data-v-0916dd6a></span><span class="visually-hidden" data-v-0916dd6a>Next</span></button>',2),I={class:"col-xl-6"},w={class:"product-caption h-100"},k={class:"product-title mb-5 d-flex"},x={class:"title-name fw-bold"},P={class:"product-price mb-5 d-flex"},C={class:"fs-5"},E={class:"product-content mb-5"},$={class:"text-secondary"},T={class:"product-category mb-5"},L={class:"text-secondary"},A=r((()=>(0,i._)("hr",{class:"mt-5 w-100"},null,-1))),S={class:"row"},D={class:"col-5"},O={class:"control"},X=["disabled"],q={class:"mx-3"},z={type:"button",class:"btn"},M={class:"col-7"},N={class:"text-end"},W={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},F={key:1,class:"visually-hidden"},U={class:"saleTitle text-center container my-5 py-5"};function H(t,e,s,r,H,j){const B=(0,i.up)("PageLoading"),J=(0,i.up)("router-view"),Z=(0,i.up)("router-link"),R=(0,i.up)("ProductOnsale"),V=(0,i.up)("Footer"),K=(0,i.up)("SocialMedia");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(B,{active:H.isLoading},null,8,["active"]),(0,i.Wm)(J),(0,i._)("div",l,[(0,i._)("div",c,[(0,i._)("nav",d,[(0,i._)("ol",u,[(0,i.Wm)(Z,{to:"/",class:"breadcrumb-item text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)("首頁")])),_:1}),(0,i.Wm)(Z,{to:"/products",class:"breadcrumb-item"},{default:(0,i.w5)((()=>[(0,i.Uk)("產品列表")])),_:1}),(0,i._)("li",h,[(0,i._)("strong",null,(0,a.zw)(H.tempProduct.title),1)])])]),(0,i._)("div",_,[(0,i._)("div",p,[(0,i._)("div",m,[v,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(H.tempProduct.imagesUrl?.length,(t=>((0,i.wg)(),(0,i.iD)("button",{type:"button","data-bs-target":"#carouselIndicators","data-bs-slide-to":t,key:t},null,8,g)))),128))]),(0,i._)("div",f,[(0,i._)("div",b,[(0,i._)("div",null,[(0,i._)("div",{class:"product-img w-100",style:(0,a.j5)([{"background-size":"cover","background-position":"center"},{backgroundImage:`url(${H.productImg})`}])},null,4)])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(H.tempProduct.imagesUrl,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"carousel-item",key:t},[(0,i._)("div",{class:"product-img w-100",style:(0,a.j5)([{"background-size":"cover","background-position":"center"},{backgroundImage:`url(${t})`}])},null,4)])))),128))]),y],512)]),(0,i._)("div",I,[(0,i._)("div",w,[(0,i._)("div",k,[(0,i._)("span",x,(0,a.zw)(H.tempProduct.title),1),(0,i._)("div",null,[(0,i._)("button",{type:"button",class:(0,a.C_)(["fa-solid z-2 fa-heart fs-3 border-0 bg-light",j.isFavorite(H.tempProduct.id)?"favorite":""]),onClick:e[0]||(e[0]=(0,n.iM)((t=>j.favoriteBtn(H.tempProduct)),["stop"]))},"收藏",2)])]),(0,i._)("div",P,[(0,i._)("span",null,[(0,i._)("strong",C,(0,a.zw)(t.$filter.currency(H.tempProduct.price)),1),(0,i.Uk)(" 元 / "+(0,a.zw)(H.tempProduct.unit),1)])]),(0,i._)("div",E,[(0,i._)("p",$,(0,a.zw)(H.tempProduct.content)+(0,a.zw)(H.tempProduct.description),1)]),(0,i._)("div",T,[(0,i._)("span",L,"#"+(0,a.zw)(H.tempProduct.category),1)]),A,(0,i._)("div",S,[(0,i._)("div",D,[(0,i._)("div",O,[(0,i._)("button",{type:"button",class:"btn ms-auto",disabled:1===H.qty},[(0,i._)("i",{class:"fa-solid fa-minus",onClick:e[1]||(e[1]=t=>j.changeAmount(-1))})],8,X),(0,i._)("span",q,(0,a.zw)(H.qty),1),(0,i._)("button",z,[(0,i._)("i",{class:"fa-solid fa-plus",onClick:e[2]||(e[2]=t=>j.changeAmount(1))})])])]),(0,i._)("div",M,[(0,i._)("div",N,[(0,i._)("button",{type:"button",class:"btn btn-primary text-white fw-bold",onClick:e[3]||(e[3]=(...t)=>j.addCart&&j.addCart(...t))},[H.status.loadingItem===H.tempProduct.id?((0,i.wg)(),(0,i.iD)("span",W)):(0,i.kq)("",!0),H.status.loadingItem===H.tempProduct.id?((0,i.wg)(),(0,i.iD)("span",F,"Loading...")):(0,i.kq)("",!0),(0,i.Uk)("加入購物車 ")])])])])])])])]),(0,i._)("div",U,[(0,i.Wm)(R)]),(0,i.Wm)(V),(0,i.Wm)(K)])}s(7658);var j=s(7814),B=s(7211),J=s(8664),Z=s(1957),R=s.n(Z),V={data(){return{qty:1,isLoading:!1,tempProduct:{},productTitle:"",productImg:"",status:{loadingItem:""},favorite:[],favoriteIds:[]}},methods:{getProduct(){this.isLoading=!0;const t=this.$route.params.productId,e=`https://vue3-course-api.hexschool.io/api/colpp61109/product/${t}`;this.$http.get(e).then((t=>{this.isLoading=!1,t.data.success&&(this.tempProduct=t.data.product,this.productImg=t.data.product.imageUrl)})).catch((()=>{}))},addCart(){const t="https://vue3-course-api.hexschool.io/api/colpp61109/cart";this.status.loadingItem=this.tempProduct.id,this.status.loadingItem=this.tempProduct.id;const e={product_id:this.tempProduct.id,qty:this.qty};this.$http.post(t,{data:e}).then((t=>{this.$pushMessage(t,"加入購物車"),this.emitter.emit("update-cart"),this.status.loadingItem=""})).catch((()=>{}))},getFavorite(){this.favorite=JSON.parse(localStorage.getItem("favorite"))||[],this.favoriteIds=[],this.favorite.forEach((t=>{this.favoriteIds.push(t.id)}))},isFavorite(t){return this.favoriteIds.some((e=>e===t))},favoriteBtn(){const t=this.tempProduct.id,e=this.favorite.some((e=>e.id===t));if(e){const e=this.favorite.find((e=>e.id===t));this.favorite.splice(this.favorite.indexOf(e),1),localStorage.setItem("favorite",JSON.stringify(this.favorite)),this.$pushMessage(!0,"移除收藏")}else this.favorite.push(this.tempProduct),localStorage.setItem("favorite",JSON.stringify(this.favorite)),this.$pushMessage(!0,"加入收藏");this.getFavorite(),this.emitter.emit("update-favorite")},changeAmount(t){t>0?this.qty+=1:(this.qty-=1,this.qty<1&&(this.qty=1))}},watch:{$route(){this.getProduct()}},mounted(){this.getProduct(),this.getFavorite(),this.carousel=new(R())(this.$refs.Carousel)},components:{ProductOnsale:j.Z,Footer:J.Z,SocialMedia:B.Z},inject:["emitter"]},K=s(89);const Q=(0,K.Z)(V,[["render",H],["__scopeId","data-v-0916dd6a"]]);var Y=Q}}]);
//# sourceMappingURL=233.94679c89.js.map