"use strict";(self["webpackChunkvue_glasses"]=self["webpackChunkvue_glasses"]||[]).push([[254],{2379:function(t,e){class a{constructor(){window.localStorage||console.error("當前的開發環境不支援 localStorage")}get(t){if(!t)return void console.error("缺少取得localstorage 的 key");const e=window.localStorage.getItem(t)||[];return e?JSON.parse(e):void 0}set(t,e){if(!t)return void console.error("缺少取得localstorage 的 key");if(!e)return void console.error("缺少取得localstorage 的 value");window.localStorage.setItem(t,JSON.stringify(e));const a=this.get(t);return!!a||(console.error("設定 localStorage 失敗"),!1)}}e.Z=new a},2883:function(t,e,a){a.d(e,{Z:function(){return v}});var i=a(3396);const s={class:"bg-section mt-5"},o=(0,i.uE)('<div class="container" data-v-2cc0195b><div class="d-block section d-md-flex p-5" data-v-2cc0195b><div class="d-flex item d-md-block d-lg-flex w-100" data-v-2cc0195b><div class="logo" data-v-2cc0195b><i class="fa-solid fa-truck text-white fs-2 pt-2" data-v-2cc0195b></i></div><div class="text text-white fw-bold mx-2" data-v-2cc0195b><span data-v-2cc0195b>免費送府</span><p data-v-2cc0195b>配完眼鏡隔天請專人送上府</p></div></div><div class="d-flex item d-md-block d-lg-flex w-100" data-v-2cc0195b><div class="logo" data-v-2cc0195b><i class="fa-solid fa-gift text-white fs-2 pt-2" data-v-2cc0195b></i></div><div class="text text-white fw-bold mx-2" data-v-2cc0195b><span data-v-2cc0195b>加碼送</span><p data-v-2cc0195b>花費$8000再送一副太陽眼鏡</p></div></div><div class="d-flex item d-md-block d-lg-flex w-100" data-v-2cc0195b><div class="logo" data-v-2cc0195b><i class="fa-solid fa-hand-holding-dollar text-white fs-2 pt-2" data-v-2cc0195b></i></div><div class="text text-white fw-bold mx-2" data-v-2cc0195b><span data-v-2cc0195b>紅利點數</span><p data-v-2cc0195b>1點可折抵消費金1元</p></div></div></div></div>',1),c=[o];function l(t,e,a,o,l,d){return(0,i.wg)(),(0,i.iD)("div",s,c)}var d={name:"TheSection"},r=a(89);const n=(0,r.Z)(d,[["render",l],["__scopeId","data-v-2cc0195b"]]);var v=n},2304:function(t,e,a){a.r(e),a.d(e,{default:function(){return T}});var i=a(3396),s=a(9242),o=a(7139);const c=t=>((0,i.dD)("data-v-4a41bd05"),t=t(),(0,i.Cn)(),t),l={class:"bg-light"},d=c((()=>(0,i._)("div",{class:"favorite-banner position-relative mb-5"},[(0,i._)("div",{class:"favorite-title bg-dark bg-opacity-50 w-100 position-absolute bottom-0 d-flex align-items-center h-100"},[(0,i._)("h1",{class:"text-white fw-bold mx-auto"},"收藏商品")])],-1))),r={class:"container"},n={class:"row"},v={class:"col-12 d-flex flex-wrap control-center"},u={class:"card h-100 m-2"},f=["onClick"],p={class:"control-img overflow-hidden"},g=c((()=>(0,i._)("button",{type:"button",class:"btn bg-dark bg-opacity-25 position-absolute text-white fs-3 fw-bold"},"查看更多",-1))),h=["src","alt"],b={class:"card-body text-center"},m=["onClick"],w={class:"card-title fw-bold"},x={class:"card-text fw-bold"},k={class:"text-start"},_=["onClick"],y={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},C={key:1,class:"visually-hidden"},S={key:0,class:"nothing text-center w-100 my-5 d-flex flex-column justify-content-center align-items-center"},Z=c((()=>(0,i._)("img",{src:"https://www.svgrepo.com//show/533045/cart-xmark.svg",alt:"xmark",width:"80",height:"80"},null,-1))),D=c((()=>(0,i._)("p",{class:"fw-bold fs-2 text-info"},"目前沒有收藏商品",-1))),$={class:"saleTitle text-center","data-aos":"fade-right","data-aos-duration":"2000"};function I(t,e,a,c,I,F){const M=(0,i.up)("router-view"),N=(0,i.up)("ProductOnsale"),O=(0,i.up)("Section"),P=(0,i.up)("Footer"),W=(0,i.up)("SocialMedia");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(M),(0,i._)("div",l,[d,(0,i._)("div",r,[(0,i._)("div",n,[(0,i._)("ul",v,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(I.favorite,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id,class:"list-unstyled col-md-6 col-lg-4 col-xl-3 my-2"},[(0,i._)("div",u,[(0,i._)("a",{href:"#",class:"stretched-link",onClick:(0,s.iM)((t=>F.productDetail(e.id)),["prevent"])},[(0,i._)("div",p,[g,(0,i._)("img",{src:e.imageUrl,class:"card-img-top favorite-img",alt:e.title},null,8,h)])],8,f),(0,i._)("div",b,[(0,i._)("span",{class:(0,o.C_)(["fa-solid text-end z-2 fa-heart",{favorite:I.isFavorite}]),onClick:(0,s.iM)((t=>F.favoriteBtn(e)),["stop"])},null,10,m),(0,i._)("span",w,(0,o.zw)(e.title),1),(0,i._)("p",x,"NT$"+(0,o.zw)(t.$filter.currency(e.price)),1),(0,i._)("div",k,[(0,i._)("button",{type:"button",class:"btn btn-primary text-white position-relative z-2 addbtn",onClick:t=>F.addCart(e.id)},[I.status.loadingItem===e.id?((0,i.wg)(),(0,i.iD)("span",y)):(0,i.kq)("",!0),I.status.loadingItem===e.id?((0,i.wg)(),(0,i.iD)("span",C,"Loading...")):(0,i.kq)("",!0),(0,i.Uk)("加入購物車 ")],8,_)])])])])))),128))])]),I.favoriteNum?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",S,[Z,D,(0,i._)("button",{type:"button",class:"btn btn-outline-info fw-bold my-3 p-2 fs-4",onClick:e[0]||(e[0]=(...t)=>F.proceedPage&&F.proceedPage(...t))},"前往商品頁面")])),(0,i._)("div",$,[(0,i.Wm)(N)])]),(0,i.Wm)(O),(0,i.Wm)(P),(0,i.Wm)(W)])],64)}a(7658);var F=a(2379),M=a(1920),N=a(8804),O=a(7211),P=a(2883),W={data(){return{favorite:[],favoriteNum:0,isFavorite:!0,status:{loadingItem:""}}},inject:["emitter"],methods:{getFavorite(){this.favorite=F.Z.get("favorite"),this.favoriteNum=F.Z.get("favorite").length},favoriteBtn(t){const e=t.id,a=this.favorite.some((t=>t.id===e));if(a){const t=this.favorite.find((t=>t.id===e));this.favorite.splice(this.favorite.indexOf(t),1),F.Z.set("favorite",this.favorite),this.$pushMessage(!0,"移除收藏")}this.getFavorite(),this.emitter.emit("update-favorite")},addCart(t){const e="https://vue3-course-api.hexschool.io/api/colpp61109/cart";this.status.loadingItem=t;const a={product_id:t,qty:1};this.$http.post(e,{data:a}).then((t=>{this.$pushMessage(t,"加入購物車"),this.emitter.emit("update-cart"),this.status.loadingItem=""})).catch((t=>{this.$pushMessage(t.response)}))},productDetail(t){this.$router.push(`/products/${t}`)},proceedPage(){this.$router.push("/products")}},mounted(){this.getFavorite()},components:{ProductOnsale:N.Z,Footer:M.Z,SocialMedia:O.Z,Section:P.Z}},q=a(89);const z=(0,q.Z)(W,[["render",I],["__scopeId","data-v-4a41bd05"]]);var T=z}}]);
//# sourceMappingURL=254.f9b33b56.js.map