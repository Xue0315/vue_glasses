{"version":3,"file":"js/573.40439cc9.js","mappings":"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","sources":["webpack://vue_glasses/./src/views/user/UserProuductItem.vue","webpack://vue_glasses/./src/views/user/UserProuductItem.vue?2fc6"],"sourcesContent":["<template>\r\n    <div class=\"bg-light\">\r\n        <PageLoading :active=\"isLoading\"></PageLoading>\r\n        <router-view></router-view>\r\n        <div class=\"container py-5\">\r\n            <div class=\"row position-relative\">\r\n                <nav aria-label=\"breadcrumb \">\r\n                        <ol class=\"breadcrumb d-none d-md-flex\">\r\n                            <router-link to=\"/\" class=\"breadcrumb-item text-primary\">首頁</router-link>\r\n                            <router-link to=\"/products\" class=\"breadcrumb-item\">產品列表</router-link>\r\n                            <li class=\"breadcrumb-item active\" aria-current=\"page\"><strong>{{tempProduct.title}}</strong></li>\r\n                        </ol>\r\n                </nav>\r\n                <div class=\"col-xl-6\">\r\n                    <div class=\"product-image mx-5\">\r\n                        <div class=\"product-img\" style=\"background-size:cover; background-position: center;\" \r\n                            :style=\"{backgroundImage: `url(${productImg})`}\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-xl-6\">\r\n                    <div class=\"product-caption h-100\">\r\n                        <div class=\" product-title mb-5\">\r\n                            <h2 class=\"h2 fw-bold \">{{ tempProduct.title }}</h2>\r\n                        </div>\r\n                        <div class=\"product-price mb-5 d-flex\">\r\n                            <span><strong class=\"fs-5\">{{ $filter.currency(tempProduct.price) }} </strong> 元  / {{ tempProduct.unit }}</span>\r\n                            <button type=\"button\" class=\"fa-solid z-2 fa-heart fs-3 border-0 bg-light \" :class=\"isFavorite(tempProduct.id) ? 'favorite' : ''\" @click.stop=\"favoriteBtn(tempProduct)\">收藏</button>\r\n                        </div>\r\n                        <div class=\"product-content mb-5\">\r\n                            <p class=\"text-secondary\">{{ tempProduct.content }}{{ tempProduct.description }}</p>\r\n                        </div>\r\n                        <div class=\"product-category mb-5\">\r\n                            <span class=\"text-secondary\">#{{ tempProduct.category }}</span>\r\n                        </div>\r\n                        <hr class=\"mt-5 w-100\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-5\">\r\n                                <div class=\"control\">\r\n                                    <button class=\"btn ms-auto\"><i class=\"fa-solid fa-minus \" @click=\"changeAmount(-1)\"></i></button>\r\n                                    <span class=\"mx-3\">{{qty}}</span>\r\n                                    <button class=\"btn\"><i class=\"fa-solid fa-plus \"  @click=\"changeAmount(1)\"></i></button>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-7\">\r\n                                <div class=\"text-end\">\r\n                                    <button type=\"button\" class=\"btn btn-primary text-white fw-bold \" @click=\"addCart\">\r\n                                        <span class=\"spinner-border spinner-border-sm mx-1\" role=\"status\" aria-hidden=\"true\" v-if=\"status.loadingItem === tempProduct.id\"></span>\r\n                                        <span class=\"visually-hidden\" v-if=\"status.loadingItem === tempProduct.id\">Loading...</span>加入購物車</button>   \r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div> \r\n        </div>\r\n        <div class=\"saleTitle text-center container my-5 py-5\">\r\n            <ProductOnsale/>\r\n        </div>\r\n        <Footer></Footer>\r\n        <SocialMedia/>\r\n    </div>\r\n</template>\r\n    \r\n<script>\r\nimport ProductOnsale from '@/components/ProductOnsale.vue'\r\nimport SocialMedia from '@/components/SocialMedia.vue'\r\nimport Footer from '@/components/Footer.vue'\r\nexport default {\r\n    data(){\r\n        return {\r\n            qty:1,\r\n            isLoading:false,\r\n            tempProduct:{},\r\n            productTitle:'',\r\n            productImg:'',\r\n            status:{\r\n                loadingItem:''\r\n            },\r\n            favorite:[],\r\n            favoriteIds:[],\r\n        }\r\n    },\r\n    methods:{\r\n        getProduct () {\r\n            this.isLoading = true\r\n            const id = this.$route.params.productId\r\n            const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${id}`\r\n            this.$http.get(api).then((res) => {\r\n                this.isLoading = false\r\n                    if (res.data.success) {\r\n                        this.tempProduct = res.data.product;\r\n                        this.productImg = res.data.product.imageUrl\r\n                    }\r\n                })\r\n            },\r\n        addCart(){\r\n                const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n                this.status.loadingItem = this.tempProduct.id;\r\n                this.status.loadingItem = this.tempProduct.id;\r\n                const product = {\r\n                    product_id:this.tempProduct.id,\r\n                    qty:this.qty\r\n                };\r\n                this.$http.post(api,{data:product})\r\n                    .then(res=>{\r\n                        this.$pushMessage(res,'加入購物車');\r\n                        this.emitter.emit('update-cart');\r\n                        this.status.loadingItem = '';\r\n                })\r\n        },\r\n        getFavorite () {\r\n            this.favorite = JSON.parse(localStorage.getItem('favorite')) || []\r\n            this.favoriteIds = []\r\n            this.favorite.forEach((item) => {\r\n                this.favoriteIds.push(item.id)\r\n            })\r\n        },\r\n        isFavorite (id) {\r\n                return this.favoriteIds.some((item) => item === id)\r\n        },\r\n        favoriteBtn(){\r\n                const id = this.tempProduct.id;\r\n                const hasFavorite = this.favorite.some((item) => item.id === id)\r\n                if(!hasFavorite){\r\n                    this.favorite.push(this.tempProduct);\r\n                    localStorage.setItem('favorite',JSON.stringify(this.favorite));\r\n                    this.$pushMessage(true,'加入收藏');\r\n                }else{\r\n                    const delFavorite = this.favorite.find(item=> item.id === id);\r\n                    this.favorite.splice(this.favorite.indexOf(delFavorite), 1)\r\n                    localStorage.setItem('favorite',JSON.stringify(this.favorite));\r\n                    this.$pushMessage(true,'移除收藏');\r\n                }\r\n                this.getFavorite();\r\n                this.emitter.emit('update-favorite');\r\n        },\r\n        changeAmount(num){\r\n            if(num > 0){\r\n                this.qty += 1;\r\n            }else{\r\n                this.qty -= 1;\r\n                if(this.qty < 1 ){\r\n                    this.qty = 1;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        $route () {\r\n            this.getProduct()\r\n        }\r\n    },\r\n    mounted(){\r\n        this.getProduct();\r\n        this.getFavorite();\r\n    },\r\n    components:{ProductOnsale,Footer,SocialMedia},\r\n    inject:['emitter'],\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.product-caption{\r\n    position: relative;\r\n    top: 120px;\r\n    hr{\r\n        position: relative;\r\n        top: 80px;\r\n    }\r\n    .product-content{\r\n        width: 480px;\r\n        @media (max-width: 1200px) {\r\n            margin: auto;\r\n        }\r\n        @media (max-width: 768px) {\r\n            padding: 0 20px;\r\n            width: 400px;\r\n        }\r\n        @media (max-width: 391px) {\r\n            width: 310px;\r\n        }\r\n    }   \r\n    .product-category{\r\n        @media (max-width:1200px) {\r\n            display: none;\r\n        }\r\n    }\r\n}\r\n.product-detail{\r\n    top: 150px;\r\n}\r\n.product-img{\r\n    height: 500px;\r\n    @media (max-width:1200px) {\r\n    }\r\n    @media (max-width:768px) {\r\n        height: 300px;\r\n    }\r\n}\r\n.product-image{\r\n    position: relative;\r\n    top: 100px;\r\n}\r\n.breadcrumb{\r\n    position: absolute;\r\n    top: 55px;\r\n    transform: translateX(50px);\r\n}\r\n.product-title{\r\n    @media (max-width: 1200px) {\r\n        text-align: center;\r\n    }\r\n}\r\n.product-price{\r\n    justify-content: space-between;\r\n    @media (max-width: 1200px) {\r\n        justify-content: space-around;\r\n    }\r\n    .fa-heart{\r\n        color: #ccc;\r\n        &.favorite,&:hover{\r\n            color: #ff4d4d;\r\n        }\r\n    }\r\n}\r\n\r\n</style>","import { render } from \"./UserProuductItem.vue?vue&type=template&id=7da41434&scoped=true\"\nimport script from \"./UserProuductItem.vue?vue&type=script&lang=js\"\nexport * from \"./UserProuductItem.vue?vue&type=script&lang=js\"\n\nimport \"./UserProuductItem.vue?vue&type=style&index=0&id=7da41434&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7da41434\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","role","_createElementBlock","_hoisted_1","_createVNode","_component_PageLoading","active","$data","isLoading","_component_router_view","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_component_router_link","to","_hoisted_6","_toDisplayString","tempProduct","title","_hoisted_7","_hoisted_8","style","_normalizeStyle","backgroundImage","productImg","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_ctx","$filter","currency","price","unit","type","_normalizeClass","$options","isFavorite","id","onClick","_cache","_withModifiers","$event","favoriteBtn","_hoisted_15","_hoisted_16","content","description","_hoisted_17","_hoisted_18","category","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","changeAmount","_hoisted_24","qty","_hoisted_25","_hoisted_26","_hoisted_27","args","addCart","status","loadingItem","_hoisted_28","_hoisted_29","_hoisted_30","_component_ProductOnsale","_component_Footer","_component_SocialMedia","data","productTitle","favorite","favoriteIds","methods","getProduct","this","$route","params","productId","api","$http","get","then","res","success","product","imageUrl","product_id","post","$pushMessage","emitter","emit","getFavorite","JSON","parse","localStorage","getItem","forEach","item","push","some","hasFavorite","delFavorite","find","splice","indexOf","setItem","stringify","num","watch","mounted","components","ProductOnsale","Footer","SocialMedia","inject","__exports__","render"],"sourceRoot":""}