"use strict";(self["webpackChunkvue_glasses"]=self["webpackChunkvue_glasses"]||[]).push([[89],{6219:function(t,s,e){e.r(s),e.d(s,{default:function(){return E}});var i=e(3396),a=e(7139),o=e(9242);const r=t=>((0,i.dD)("data-v-355c8e33"),t=t(),(0,i.Cn)(),t),c={class:"bg-light"},d={class:"container py-5"},n={class:"row position-relative"},l={class:"col-6"},u={"aria-label":"breadcrumb"},p={class:"breadcrumb"},m={class:"breadcrumb-item active","aria-current":"page"},h={class:"product-image mx-5"},v={class:"col-6"},g={class:"product-caption h-100"},f={class:"product-title mb-5"},_={class:"h1 fw-bold"},b={class:"product-price w-75 mb-5 d-flex justify-content-between"},w={class:"fs-5"},y={class:"product-content mb-5"},P={class:"text-secondary"},k={class:"product-category mb-5"},I={class:"text-secondary"},x=r((()=>(0,i._)("hr",{class:"mt-5 w-100"},null,-1))),C={class:"row"},z={class:"col-6"},$={class:"control"},q={class:"btn ms-auto"},S={class:"mx-5"},F={class:"btn"},W={class:"col-6"},L={class:"text-end"},M={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},O={key:1,class:"visually-hidden"},U={class:"saleTitle text-center container my-5 py-5"},D=r((()=>(0,i._)("h2",{class:"my-5 fw-bold"},"促銷商品",-1)));function Z(t,s,e,r,Z,j){const A=(0,i.up)("PageLoading"),J=(0,i.up)("router-view"),N=(0,i.up)("router-link"),B=(0,i.up)("ProductOnsale"),T=(0,i.up)("Footer"),E=(0,i.up)("SocialMedia");return(0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(A,{active:Z.isLoading},null,8,["active"]),(0,i.Wm)(J),(0,i._)("div",d,[(0,i._)("div",n,[(0,i._)("div",l,[(0,i._)("nav",u,[(0,i._)("ol",p,[(0,i.Wm)(N,{to:"/",class:"breadcrumb-item text-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)("首頁")])),_:1}),(0,i.Wm)(N,{to:"/products",class:"breadcrumb-item"},{default:(0,i.w5)((()=>[(0,i.Uk)("產品列表")])),_:1}),(0,i._)("li",m,[(0,i._)("strong",null,(0,a.zw)(Z.tempProduct.title),1)])])]),(0,i._)("div",h,[(0,i._)("div",{style:(0,a.j5)([{height:"700px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${Z.productImg})`}])},null,4)])]),(0,i._)("div",v,[(0,i._)("div",g,[(0,i._)("div",f,[(0,i._)("h1",_,(0,a.zw)(Z.tempProduct.title),1)]),(0,i._)("div",b,[(0,i._)("span",null,[(0,i._)("strong",w,(0,a.zw)(t.$filter.currency(Z.tempProduct.price)),1),(0,i.Uk)(" 元 / "+(0,a.zw)(Z.tempProduct.unit),1)]),(0,i._)("button",{type:"button",class:(0,a.C_)(["fa-solid z-2 fa-heart fs-3 border-0 bg-light",j.isFavorite(Z.tempProduct.id)?"favorite":""]),onClick:s[0]||(s[0]=(0,o.iM)((t=>j.favoriteBtn(Z.tempProduct)),["stop"]))},"收藏",2)]),(0,i._)("div",y,[(0,i._)("p",P,(0,a.zw)(Z.tempProduct.content)+(0,a.zw)(Z.tempProduct.description),1)]),(0,i._)("div",k,[(0,i._)("span",I,"#"+(0,a.zw)(Z.tempProduct.category),1)]),x,(0,i._)("div",C,[(0,i._)("div",z,[(0,i._)("div",$,[(0,i._)("button",q,[(0,i._)("i",{class:"fa-solid fa-minus",onClick:s[1]||(s[1]=t=>j.changeAmount(-1))})]),(0,i._)("span",S,(0,a.zw)(Z.qty),1),(0,i._)("button",F,[(0,i._)("i",{class:"fa-solid fa-plus",onClick:s[2]||(s[2]=t=>j.changeAmount(1))})])])]),(0,i._)("div",W,[(0,i._)("div",L,[(0,i._)("button",{type:"button",class:"btn btn-primary text-white fw-bold w-50",onClick:s[3]||(s[3]=(...t)=>j.addCart&&j.addCart(...t))},[Z.status.loadingItem===Z.tempProduct.id?((0,i.wg)(),(0,i.iD)("span",M)):(0,i.kq)("",!0),Z.status.loadingItem===Z.tempProduct.id?((0,i.wg)(),(0,i.iD)("span",O,"Loading...")):(0,i.kq)("",!0),(0,i.Uk)("加入購物車")])])])])])])])]),(0,i._)("div",U,[D,(0,i.Wm)(B)]),(0,i.Wm)(T),(0,i.Wm)(E)])}e(7658);var j=e(9915),A=e(1970),J=e(7703),N={data(){return{qty:1,isLoading:!1,tempProduct:{},productTitle:"",productImg:"",status:{loadingItem:""},favorite:[],favoriteIds:[]}},methods:{getProduct(){this.isLoading=!0;const t=this.$route.params.productId,s=`https://vue3-course-api.hexschool.io/api/colpp61109/product/${t}`;this.$http.get(s).then((t=>{this.isLoading=!1,t.data.success?(this.tempProduct=t.data.product,this.productImg=t.data.product.imageUrl,console.log(t)):console.log(t)}))},addCart(){const t="https://vue3-course-api.hexschool.io/api/colpp61109/cart";this.status.loadingItem=this.tempProduct.id,this.status.loadingItem=this.tempProduct.id;const s={product_id:this.tempProduct.id,qty:this.qty};this.$http.post(t,{data:s}).then((t=>{this.$pushMessage(t,"加入購物車"),this.emitter.emit("update-cart"),this.status.loadingItem=""}))},getFavorite(){this.favorite=JSON.parse(localStorage.getItem("favorite"))||[],this.favoriteIds=[],this.favorite.forEach((t=>{this.favoriteIds.push(t.id)}))},isFavorite(t){return this.favoriteIds.some((s=>s===t))},favoriteBtn(){const t=this.tempProduct.id,s=this.favorite.some((s=>s.id===t));if(s){const s=this.favorite.find((s=>s.id===t));this.favorite.splice(this.favorite.indexOf(s),1),localStorage.setItem("favorite",JSON.stringify(this.favorite)),this.$pushMessage(!0,"移除收藏")}else this.favorite.push(this.tempProduct),localStorage.setItem("favorite",JSON.stringify(this.favorite)),this.$pushMessage(!0,"加入收藏");this.getFavorite(),this.emitter.emit("update-favorite")},changeAmount(t){t>0?this.qty+=1:this.qty-=1}},watch:{$route(){this.getProduct()}},mounted(){this.getProduct(),this.getFavorite()},components:{ProductOnsale:j.Z,Footer:J.Z,SocialMedia:A.Z},inject:["emitter"]},B=e(89);const T=(0,B.Z)(N,[["render",Z],["__scopeId","data-v-355c8e33"]]);var E=T}}]);
//# sourceMappingURL=89.bd5563b6.js.map